{
  "nodes": [
    {
      "id": "aws-account",
      "label": "AWS Account",
      "subtitle": "Tier-1 Investment Bank",
      "icon": "/icons/aws/aws.png",
      "type": "container"
    },
    {
      "id": "vpc",
      "label": "VPC",
      "subtitle": "imladris-prod-vpc (10.0.0.0/16)",
      "icon": "/icons/aws/network/vpc.png",
      "type": "container",
      "parentNode": "aws-account"
    },
    {
      "id": "vpc-lattice",
      "label": "VPC Lattice Service Network",
      "subtitle": "Zero Trust Service Mesh",
      "icon": "/icons/aws/network/vpc.png",
      "parentNode": "vpc"
    },
    {
      "id": "private-subnet-1",
      "label": "Private Subnet",
      "subtitle": "AZ-1a (10.0.0.0/24)",
      "icon": "/icons/aws/network/private-subnet.png",
      "type": "container",
      "parentNode": "vpc"
    },
    {
      "id": "private-subnet-2",
      "label": "Private Subnet",
      "subtitle": "AZ-1b (10.0.1.0/24)",
      "icon": "/icons/aws/network/private-subnet.png",
      "type": "container",
      "parentNode": "vpc"
    },
    {
      "id": "private-subnet-3",
      "label": "Private Subnet",
      "subtitle": "AZ-1c (10.0.2.0/24)",
      "icon": "/icons/aws/network/private-subnet.png",
      "type": "container",
      "parentNode": "vpc"
    },
    {
      "id": "vpc-endpoints",
      "label": "VPC Endpoints",
      "subtitle": "Private AWS API Access",
      "icon": "/icons/aws/network/endpoint.png",
      "parentNode": "vpc"
    },
    {
      "id": "eks-cluster",
      "label": "EKS Cluster",
      "subtitle": "imladris-prod-cluster",
      "icon": "/icons/aws/compute/elastic-kubernetes-service.png",
      "type": "container",
      "parentNode": "private-subnet-2"
    },
    {
      "id": "fargate-profile",
      "label": "Fargate Profile",
      "subtitle": "Serverless Compute",
      "icon": "/icons/aws/compute/fargate.png",
      "parentNode": "eks-cluster"
    },
    {
      "id": "banking-namespace",
      "label": "banking-core Namespace",
      "subtitle": "Core Banking Services",
      "icon": "/icons/onprem/gitops/argocd.png",
      "type": "container",
      "parentNode": "eks-cluster"
    },
    {
      "id": "argocd-namespace",
      "label": "argocd Namespace",
      "subtitle": "GitOps Controller",
      "icon": "/icons/onprem/gitops/argocd.png",
      "type": "container",
      "parentNode": "eks-cluster"
    },
    {
      "id": "banking-service",
      "label": "Banking Core Service",
      "subtitle": "Go Microservice",
      "icon": "/icons/aws/compute/fargate.png",
      "parentNode": "banking-namespace"
    },
    {
      "id": "argocd-server",
      "label": "ArgoCD Server",
      "subtitle": "GitOps Engine",
      "icon": "/icons/onprem/gitops/argocd.png",
      "parentNode": "argocd-namespace"
    },
    {
      "id": "governance-layer",
      "label": "Governance & Compliance",
      "subtitle": "Policy Enforcement",
      "type": "container",
      "parentNode": "aws-account"
    },
    {
      "id": "aws-config",
      "label": "AWS Config",
      "subtitle": "Compliance Monitoring",
      "icon": "/icons/aws/management/config.png",
      "parentNode": "governance-layer"
    },
    {
      "id": "eventbridge",
      "label": "EventBridge",
      "subtitle": "Event-Driven Remediation",
      "icon": "/icons/aws/integration/eventbridge.png",
      "parentNode": "governance-layer"
    },
    {
      "id": "ssm-automation",
      "label": "Systems Manager",
      "subtitle": "Auto-Remediation",
      "icon": "/icons/aws/management/systems-manager.png",
      "parentNode": "governance-layer"
    },
    {
      "id": "identity-center",
      "label": "IAM Identity Center",
      "subtitle": "SSO & Access Control",
      "icon": "/icons/aws/security/identity-and-access-management-iam.png",
      "parentNode": "aws-account"
    },
    {
      "id": "ecr",
      "label": "ECR Repository",
      "subtitle": "Container Registry",
      "icon": "/icons/aws/compute/ec2-container-registry.png",
      "parentNode": "aws-account"
    },
    {
      "id": "external-systems",
      "label": "Development & CI/CD",
      "subtitle": "External Integration",
      "type": "container",
      "position": {
        "relativeTo": "aws-account",
        "side": "left"
      }
    },
    {
      "id": "github-repo",
      "label": "GitHub Repository",
      "subtitle": "Source Code & GitOps",
      "icon": "/icons/onprem/vcs/github.png",
      "parentNode": "external-systems"
    },
    {
      "id": "github-actions",
      "label": "GitHub Actions",
      "subtitle": "CI/CD Pipeline",
      "icon": "/icons/onprem/ci/github-actions.png",
      "parentNode": "external-systems"
    },
    {
      "id": "terraform-iac",
      "label": "Terraform",
      "subtitle": "Infrastructure as Code",
      "icon": "/icons/onprem/iac/terraform.png",
      "parentNode": "external-systems"
    },
    {
      "id": "opa-conftest",
      "label": "OPA/Conftest",
      "subtitle": "Policy Validation",
      "icon": "/icons/elastic/agent/agent.png",
      "parentNode": "external-systems"
    },
    {
      "id": "monitoring-stack",
      "label": "Observability Stack",
      "subtitle": "Monitoring & Alerting",
      "type": "container",
      "position": {
        "relativeTo": "aws-account",
        "side": "right"
      }
    },
    {
      "id": "prometheus",
      "label": "Prometheus",
      "subtitle": "Metrics Collection",
      "icon": "/icons/onprem/monitoring/prometheus.png",
      "parentNode": "monitoring-stack"
    },
    {
      "id": "grafana",
      "label": "Grafana",
      "subtitle": "Dashboards & Alerts",
      "icon": "/icons/onprem/monitoring/grafana.png",
      "parentNode": "monitoring-stack"
    },
    {
      "id": "cloudwatch",
      "label": "CloudWatch",
      "subtitle": "AWS Native Monitoring",
      "icon": "/icons/aws/management/cloudwatch.png",
      "parentNode": "monitoring-stack"
    }
  ],
  "edges": [
    {
      "id": "terraform-to-aws",
      "source": "terraform-iac",
      "target": "aws-account",
      "label": "provisions",
      "color": "blue",
      "style": "solid"
    },
    {
      "id": "github-to-actions",
      "source": "github-repo",
      "target": "github-actions",
      "label": "triggers",
      "color": "green",
      "style": "dashed"
    },
    {
      "id": "actions-to-ecr",
      "source": "github-actions",
      "target": "ecr",
      "label": "pushes images",
      "color": "green",
      "style": "dashed"
    },
    {
      "id": "actions-to-gitops",
      "source": "github-actions",
      "target": "argocd-server",
      "label": "updates manifests",
      "color": "green",
      "style": "dashed"
    },
    {
      "id": "argocd-to-banking",
      "source": "argocd-server",
      "target": "banking-service",
      "label": "deploys",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "vpc-lattice-to-banking",
      "source": "vpc-lattice",
      "target": "banking-service",
      "label": "zero trust mesh",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "identity-to-eks",
      "source": "identity-center",
      "target": "eks-cluster",
      "label": "SSO auth",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "config-to-eventbridge",
      "source": "aws-config",
      "target": "eventbridge",
      "label": "violations",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "eventbridge-to-ssm",
      "source": "eventbridge",
      "target": "ssm-automation",
      "label": "triggers",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "ssm-back-to-aws",
      "source": "ssm-automation",
      "target": "vpc",
      "label": "auto-fixes",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "vpc-endpoints-to-aws",
      "source": "vpc-endpoints",
      "target": "ecr",
      "label": "private API",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "fargate-to-banking",
      "source": "fargate-profile",
      "target": "banking-service",
      "label": "serverless runtime",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "banking-to-prometheus",
      "source": "banking-service",
      "target": "prometheus",
      "label": "metrics",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "prometheus-to-grafana",
      "source": "prometheus",
      "target": "grafana",
      "label": "dashboards",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "aws-to-cloudwatch",
      "source": "eks-cluster",
      "target": "cloudwatch",
      "label": "logs",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "policy-validation",
      "source": "opa-conftest",
      "target": "github-actions",
      "label": "validates",
      "color": "green",
      "style": "dashed"
    }
  ],
  "name": "Imladris: The Zero Trust Infinity Castle",
  "legend": {
    "edges": [
      {
        "label": "Infrastructure Provisioning",
        "color": "blue",
        "style": "solid"
      },
      {
        "label": "CI/CD Flow",
        "color": "green",
        "style": "dashed"
      },
      {
        "label": "Zero Trust Communication",
        "color": "purple",
        "style": "dotted"
      },
      {
        "label": "Self-Healing Loop",
        "color": "red",
        "style": "solid"
      },
      {
        "label": "Monitoring & Observability",
        "color": "yellow",
        "style": "dashed"
      }
    ]
  }
}