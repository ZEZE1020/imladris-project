{
  "nodes": [
    {
      "id": "dev-cicd-zone",
      "label": "Development & CI/CD Zone",
      "subtitle": "External Development Tools",
      "icon": "/icons/onprem/vcs/github.png",
      "type": "container",
      "layout": "column"
    },
    {
      "id": "github-repo",
      "label": "GitHub Repository",
      "subtitle": "Source Code & GitOps",
      "icon": "/icons/onprem/vcs/github.png",
      "parentNode": "dev-cicd-zone",
      "order": 1
    },
    {
      "id": "opa-conftest",
      "label": "OPA/Conftest",
      "subtitle": "Policy Validation",
      "icon": "/icons/elastic/agent/agent.png",
      "parentNode": "dev-cicd-zone",
      "order": 2
    },
    {
      "id": "github-actions",
      "label": "GitHub Actions",
      "subtitle": "CI/CD Pipeline",
      "icon": "/icons/onprem/ci/github-actions.png",
      "parentNode": "dev-cicd-zone",
      "order": 3
    },
    {
      "id": "terraform-iac",
      "label": "Terraform",
      "subtitle": "Infrastructure as Code",
      "icon": "/icons/onprem/iac/terraform.png",
      "parentNode": "dev-cicd-zone",
      "order": 4
    },
    {
      "id": "aws-cloud",
      "label": "AWS Cloud - Investment Bank",
      "subtitle": "Zero Trust Infrastructure",
      "icon": "/icons/aws/aws.png",
      "type": "container",
      "layout": "column",
      "position": {
        "relativeTo": "dev-cicd-zone",
        "side": "right"
      }
    },
    {
      "id": "identity-center",
      "label": "IAM Identity Center",
      "subtitle": "SSO & Access Control",
      "icon": "/icons/aws/security/identity-and-access-management-iam.png",
      "parentNode": "aws-cloud",
      "order": 1
    },
    {
      "id": "ecr",
      "label": "ECR Repository",
      "subtitle": "Container Registry",
      "icon": "/icons/aws/compute/ec2-container-registry.png",
      "parentNode": "aws-cloud",
      "order": 2
    },
    {
      "id": "governance-zone",
      "label": "Governance & Compliance",
      "subtitle": "Self-Healing Policy Engine",
      "icon": "/icons/aws/management/config.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "row",
      "order": 3
    },
    {
      "id": "aws-config",
      "label": "AWS Config",
      "subtitle": "Compliance Monitor",
      "icon": "/icons/aws/management/config.png",
      "parentNode": "governance-zone",
      "order": 1
    },
    {
      "id": "eventbridge",
      "label": "EventBridge",
      "subtitle": "Event Automation",
      "icon": "/icons/aws/integration/eventbridge.png",
      "parentNode": "governance-zone",
      "order": 2
    },
    {
      "id": "ssm-automation",
      "label": "Systems Manager",
      "subtitle": "Auto-Remediation",
      "icon": "/icons/aws/management/systems-manager.png",
      "parentNode": "governance-zone",
      "order": 3
    },
    {
      "id": "network-zone",
      "label": "VPC Network - Zero Trust",
      "subtitle": "imladris-prod-vpc (10.0.0.0/16)",
      "icon": "/icons/aws/network/vpc.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "column",
      "order": 4
    },
    {
      "id": "vpc-lattice",
      "label": "VPC Lattice",
      "subtitle": "Service Mesh",
      "icon": "/icons/aws/network/vpc.png",
      "parentNode": "network-zone",
      "order": 1
    },
    {
      "id": "vpc-endpoints",
      "label": "VPC Endpoints",
      "subtitle": "Private AWS APIs",
      "icon": "/icons/aws/network/endpoint.png",
      "parentNode": "network-zone",
      "order": 2
    },
    {
      "id": "private-subnets",
      "label": "Private Subnets",
      "subtitle": "3 AZs - No Internet Access",
      "icon": "/icons/aws/network/private-subnet.png",
      "parentNode": "network-zone",
      "order": 3
    },
    {
      "id": "compute-zone",
      "label": "EKS Fargate Cluster",
      "subtitle": "imladris-prod-cluster",
      "icon": "/icons/aws/compute/elastic-kubernetes-service.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "row",
      "order": 5
    },
    {
      "id": "argocd-server",
      "label": "ArgoCD Server",
      "subtitle": "GitOps Engine",
      "icon": "/icons/onprem/gitops/argocd.png",
      "parentNode": "compute-zone",
      "order": 1
    },
    {
      "id": "banking-service",
      "label": "Banking Services",
      "subtitle": "Go Microservices",
      "icon": "/icons/aws/compute/fargate.png",
      "parentNode": "compute-zone",
      "order": 2
    },
    {
      "id": "observability-zone",
      "label": "Observability Stack",
      "subtitle": "Monitoring & Alerting",
      "icon": "/icons/onprem/monitoring/prometheus.png",
      "type": "container",
      "layout": "column",
      "position": {
        "relativeTo": "aws-cloud",
        "side": "right"
      }
    },
    {
      "id": "prometheus",
      "label": "Prometheus",
      "subtitle": "Metrics Collection",
      "icon": "/icons/onprem/monitoring/prometheus.png",
      "parentNode": "observability-zone",
      "order": 1
    },
    {
      "id": "grafana",
      "label": "Grafana",
      "subtitle": "Dashboards & Alerts",
      "icon": "/icons/onprem/monitoring/grafana.png",
      "parentNode": "observability-zone",
      "order": 2
    },
    {
      "id": "cloudwatch",
      "label": "CloudWatch",
      "subtitle": "AWS Native Logs",
      "icon": "/icons/aws/management/cloudwatch.png",
      "parentNode": "observability-zone",
      "order": 3
    }
  ],
  "edges": [
    {
      "id": "dev-flow-1",
      "source": "github-repo",
      "target": "opa-conftest",
      "label": "policy check",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-2",
      "source": "opa-conftest",
      "target": "github-actions",
      "label": "validation ok",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-3",
      "source": "github-actions",
      "target": "ecr",
      "label": "push image",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-4",
      "source": "github-actions",
      "target": "argocd-server",
      "label": "update GitOps",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "iac-flow",
      "source": "terraform-iac",
      "target": "network-zone",
      "label": "provisions",
      "color": "blue",
      "style": "solid"
    },
    {
      "id": "identity-flow",
      "source": "identity-center",
      "target": "compute-zone",
      "label": "SSO auth",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "registry-flow",
      "source": "ecr",
      "target": "banking-service",
      "label": "pull images",
      "color": "green",
      "style": "dashed"
    },
    {
      "id": "vpc-endpoints-flow",
      "source": "vpc-endpoints",
      "target": "ecr",
      "label": "private API",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "deployment-flow",
      "source": "argocd-server",
      "target": "banking-service",
      "label": "deploys",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "service-mesh-flow",
      "source": "vpc-lattice",
      "target": "banking-service",
      "label": "zero trust mesh",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "compute-network-flow",
      "source": "private-subnets",
      "target": "banking-service",
      "label": "runs on",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "governance-flow-1",
      "source": "aws-config",
      "target": "eventbridge",
      "label": "violations",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "governance-flow-2",
      "source": "eventbridge",
      "target": "ssm-automation",
      "label": "triggers",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "governance-flow-3",
      "source": "ssm-automation",
      "target": "network-zone",
      "label": "auto-fix",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "monitoring-flow-1",
      "source": "banking-service",
      "target": "prometheus",
      "label": "metrics",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "monitoring-flow-2",
      "source": "banking-service",
      "target": "cloudwatch",
      "label": "logs",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "monitoring-flow-3",
      "source": "prometheus",
      "target": "grafana",
      "label": "dashboards",
      "color": "yellow",
      "style": "dashed"
    }
  ],
  "name": "Imladris: The Zero Trust Infinity Castle",
  "legend": {
    "edges": [
      {
        "label": "Infrastructure Provisioning",
        "color": "blue",
        "style": "solid"
      },
      {
        "label": "CI/CD Flow",
        "color": "green",
        "style": "dashed"
      },
      {
        "label": "Zero Trust Communication",
        "color": "purple",
        "style": "dotted"
      },
      {
        "label": "Self-Healing Loop",
        "color": "red",
        "style": "solid"
      },
      {
        "label": "Monitoring & Observability",
        "color": "yellow",
        "style": "dashed"
      }
    ]
  }
}