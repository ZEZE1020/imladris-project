{
  "nodes": [
    {
      "id": "dev-cicd-zone",
      "label": "Development & CI/CD",
      "subtitle": "External Development Tools",
      "icon": "/icons/onprem/vcs/github.png",
      "type": "container",
      "layout": "column",
      "showHeader": true
    },
    {
      "id": "github-repo",
      "label": "GitHub Repository",
      "subtitle": "Source Code & Policies",
      "icon": "/icons/onprem/vcs/github.png",
      "parentNode": "dev-cicd-zone",
      "order": 1
    },
    {
      "id": "opa-conftest",
      "label": "Policy Validation",
      "subtitle": "OPA/Conftest Security Gates",
      "icon": "/icons/elastic/agent/agent.png",
      "parentNode": "dev-cicd-zone",
      "order": 2
    },
    {
      "id": "github-actions",
      "label": "CI/CD Pipeline",
      "subtitle": "Build → Test → Deploy",
      "icon": "/icons/onprem/ci/github-actions.png",
      "parentNode": "dev-cicd-zone",
      "order": 3
    },
    {
      "id": "terraform-iac",
      "label": "Infrastructure as Code",
      "subtitle": "Terraform Modules",
      "icon": "/icons/onprem/iac/terraform.png",
      "parentNode": "dev-cicd-zone",
      "order": 4
    },
    {
      "id": "aws-cloud",
      "label": "AWS Cloud",
      "subtitle": "Zero Trust Banking Infrastructure",
      "icon": "/icons/aws/aws.png",
      "type": "container",
      "layout": "column",
      "position": {
        "relativeTo": "dev-cicd-zone",
        "side": "right"
      },
      "showHeader": true
    },
    {
      "id": "identity-center",
      "label": "IAM Identity Center",
      "subtitle": "Centralized SSO & RBAC",
      "icon": "/icons/aws/security/identity-and-access-management-iam.png",
      "parentNode": "aws-cloud",
      "order": 1
    },
    {
      "id": "ecr",
      "label": "Container Registry",
      "subtitle": "Secure Image Storage",
      "icon": "/icons/aws/compute/ec2-container-registry.png",
      "parentNode": "aws-cloud",
      "order": 2
    },
    {
      "id": "governance-zone",
      "label": "Self-Healing Governance",
      "subtitle": "Automated Compliance Engine",
      "icon": "/icons/aws/management/config.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "row",
      "order": 3,
      "showHeader": true
    },
    {
      "id": "aws-config",
      "label": "AWS Config",
      "subtitle": "Resource Monitoring",
      "icon": "/icons/aws/management/config.png",
      "parentNode": "governance-zone",
      "order": 1
    },
    {
      "id": "eventbridge",
      "label": "EventBridge",
      "subtitle": "Event-Driven Triggers",
      "icon": "/icons/aws/integration/eventbridge.png",
      "parentNode": "governance-zone",
      "order": 2
    },
    {
      "id": "ssm-automation",
      "label": "Systems Manager",
      "subtitle": "Violation Remediation",
      "icon": "/icons/aws/management/systems-manager.png",
      "parentNode": "governance-zone",
      "order": 3
    },
    {
      "id": "network-zone",
      "label": "Zero Trust Network",
      "subtitle": "Private-Only VPC (10.0.0.0/16)",
      "icon": "/icons/aws/network/vpc.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "column",
      "order": 4,
      "showHeader": true
    },
    {
      "id": "vpc-lattice",
      "label": "Service Mesh",
      "subtitle": "IAM-Authenticated Communication",
      "icon": "/icons/aws/network/vpc.png",
      "parentNode": "network-zone",
      "order": 1
    },
    {
      "id": "vpc-endpoints",
      "label": "VPC Endpoints",
      "subtitle": "Private AWS Service Access",
      "icon": "/icons/aws/network/endpoint.png",
      "parentNode": "network-zone",
      "order": 2
    },
    {
      "id": "private-subnets",
      "label": "Private Subnets",
      "subtitle": "Multi-AZ with No Internet",
      "icon": "/icons/aws/network/private-subnet.png",
      "parentNode": "network-zone",
      "order": 3
    },
    {
      "id": "compute-zone",
      "label": "Serverless Kubernetes",
      "subtitle": "EKS Fargate Cluster",
      "icon": "/icons/aws/compute/elastic-kubernetes-service.png",
      "type": "container",
      "parentNode": "aws-cloud",
      "layout": "row",
      "order": 5,
      "showHeader": true
    },
    {
      "id": "argocd-server",
      "label": "ArgoCD Server",
      "subtitle": "Continuous Deployment",
      "icon": "/icons/onprem/gitops/argocd.png",
      "parentNode": "compute-zone",
      "order": 1
    },
    {
      "id": "banking-service",
      "label": "Banking Applications",
      "subtitle": "Immutable Microservices",
      "icon": "/icons/aws/compute/fargate.png",
      "parentNode": "compute-zone",
      "order": 2
    },
    {
      "id": "observability-zone",
      "label": "Observability",
      "subtitle": "Monitoring & Alerting",
      "icon": "/icons/onprem/monitoring/prometheus.png",
      "type": "container",
      "layout": "column",
      "position": {
        "relativeTo": "aws-cloud",
        "side": "right"
      },
      "showHeader": true
    },
    {
      "id": "prometheus",
      "label": "Prometheus",
      "subtitle": "Metrics Collection",
      "icon": "/icons/onprem/monitoring/prometheus.png",
      "parentNode": "observability-zone",
      "order": 1
    },
    {
      "id": "grafana",
      "label": "Grafana",
      "subtitle": "Dashboards & Alerts",
      "icon": "/icons/onprem/monitoring/grafana.png",
      "parentNode": "observability-zone",
      "order": 2
    },
    {
      "id": "cloudwatch",
      "label": "CloudWatch",
      "subtitle": "AWS Native Logs",
      "icon": "/icons/aws/management/cloudwatch.png",
      "parentNode": "observability-zone",
      "order": 3
    }
  ],
  "edges": [
    {
      "id": "dev-flow-1",
      "source": "github-repo",
      "target": "opa-conftest",
      "label": "validate policies",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-2",
      "source": "opa-conftest",
      "target": "github-actions",
      "label": "approved",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-3",
      "source": "github-actions",
      "target": "ecr",
      "label": "build & push",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "dev-flow-4",
      "source": "github-actions",
      "target": "argocd-server",
      "label": "update manifests",
      "color": "green",
      "style": "solid"
    },
    {
      "id": "iac-flow",
      "source": "terraform-iac",
      "target": "network-zone",
      "label": "provision",
      "color": "blue",
      "style": "solid"
    },
    {
      "id": "identity-flow",
      "source": "identity-center",
      "target": "compute-zone",
      "label": "authenticate",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "registry-flow",
      "source": "ecr",
      "target": "banking-service",
      "label": "secure pull",
      "color": "green",
      "style": "dashed"
    },
    {
      "id": "vpc-endpoints-flow",
      "source": "vpc-endpoints",
      "target": "ecr",
      "label": "private access",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "deployment-flow",
      "source": "argocd-server",
      "target": "banking-service",
      "label": "deploy apps",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "service-mesh-flow",
      "source": "vpc-lattice",
      "target": "banking-service",
      "label": "secure mesh",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "compute-network-flow",
      "source": "private-subnets",
      "target": "banking-service",
      "label": "host services",
      "color": "purple",
      "style": "dotted"
    },
    {
      "id": "governance-flow-1",
      "source": "aws-config",
      "target": "eventbridge",
      "label": "detect violations",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "governance-flow-2",
      "source": "eventbridge",
      "target": "ssm-automation",
      "label": "trigger fix",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "governance-flow-3",
      "source": "ssm-automation",
      "target": "network-zone",
      "label": "auto-remediate",
      "color": "red",
      "style": "solid"
    },
    {
      "id": "monitoring-flow-1",
      "source": "banking-service",
      "target": "prometheus",
      "label": "export metrics",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "monitoring-flow-2",
      "source": "banking-service",
      "target": "cloudwatch",
      "label": "stream logs",
      "color": "yellow",
      "style": "dashed"
    },
    {
      "id": "monitoring-flow-3",
      "source": "prometheus",
      "target": "grafana",
      "label": "visualize",
      "color": "yellow",
      "style": "dashed"
    }
  ],
  "name": "Imladris: The Zero Trust Infinity Castle",
  "legend": {
    "edges": [
      {
        "label": "Infrastructure Provisioning",
        "color": "blue",
        "style": "solid"
      },
      {
        "label": "CI/CD Flow",
        "color": "green",
        "style": "dashed"
      },
      {
        "label": "Zero Trust Communication",
        "color": "purple",
        "style": "dotted"
      },
      {
        "label": "Self-Healing Loop",
        "color": "red",
        "style": "solid"
      },
      {
        "label": "Monitoring & Observability",
        "color": "yellow",
        "style": "dashed"
      }
    ]
  }
}